(this.webpackJsonpcoronasafe=this.webpackJsonpcoronasafe||[]).push([[0],{18:function(e,t,o){e.exports=o(45)},23:function(e,t,o){},45:function(e,t,o){"use strict";o.r(t);var a=o(0),n=o.n(a),r=o(7),s=o.n(r),l=(o(23),o(2)),i=o(3),u=o(1),c=o(5),d=o(4),h=o(16),g=o.n(h),p=o(17),m={position:"absolute",width:40,height:40,left:-20,top:-20,border:"5px solid #f44336",borderRadius:40,backgroundColor:"white",textAlign:"center",color:"#3f51b5",fontSize:16,fontWeight:"bold",padding:4},v=function(e){Object(c.a)(o,e);var t=Object(d.a)(o);function o(){return Object(l.a)(this,o),t.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){return n.a.createElement("div",{style:m},"Case here.")}}]),o}(a.Component);function b(e){var t=e.slice(1,-1).split(", ");return{latitude:parseFloat(t[0]),longitude:parseFloat(t[1])}}function f(e,t,o){var a=new XMLHttpRequest;a.open("POST",t),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),a.setRequestHeader("Purpose","gotCorona"),a.setRequestHeader("Username",o),a.setRequestHeader("Coords",e.latitude.toString()+" "+e.longitude.toString()),a.send(e.latitude.toString()+" "+e.longitude.toString()),console.log(a.responseText),console.log("sent: "+e.latitude.toString()+" "+e.longitude.toString())}var S=function(e){Object(c.a)(o,e);var t=Object(d.a)(o);function o(e){var a;return Object(l.a)(this,o),(a=t.call(this,e)).createTable=function(){var e=[];console.log(o.state.coords.length);for(var t=0;t<o.state.coords.length;t++)e.push(n.a.createElement(v,{key:t,lat:o.state.coords[t].latitude,lng:o.state.coords[t].longitude})),console.log("Coords: Latitude - "+o.state.coords[t].latitude.toString()+" Longitude - "+o.state.coords[t].longitude.toString());return console.log(e),e},a.state={value:"",loggedIn:!1,map:!1},a.handleChange=a.handleChange.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.toggleMap=a.toggleMap.bind(Object(u.a)(a)),o.state={map:!1,latitude:0,longitude:0,coords:[],coordState:!1},a}return Object(i.a)(o,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){!function(e,t,o){var a=new XMLHttpRequest;a.open("POST",t),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),a.setRequestHeader("Purpose","login"),a.setRequestHeader("Username",o),a.setRequestHeader("Coords",e.latitude.toString()+" "+e.longitude.toString()),a.send(e.latitude.toString()+" "+e.longitude.toString()),console.log(a.responseText),console.log("sent: "+e.latitude.toString()+" "+e.longitude.toString())}(this.props.coords,"https://RawPythonTest.r2dev2bb8.repl.co",this.state.value),this.setState({loggedIn:!0}),this.getCoords(this.props.coords,"https://RawPythonTest.r2dev2bb8.repl.co",this.state.value),e.preventDefault()}},{key:"toggleMap",value:function(){this.setState({map:!0})}},{key:"setCoordState",value:function(e){this.setState(e,e)}},{key:"getCoords",value:function(e,t,a){var n;console.log(e);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){n=r.responseText.split("\n");for(var e=0;e<n.length;e++)n[e]=b(n[e]),o.state.coords.push(n[e]);console.log(o.state.coords),o.state.coordState=!0}},r.open("GET","https://RawPythonTest.r2dev2bb8.repl.co",!0),r.setRequestHeader("Username",a),r.send(null)}},{key:"render",value:function(){return this.props.isGeolocationAvailable?this.props.isGeolocationEnabled?this.props.coords&&!this.state.loggedIn?n.a.createElement("div",{style:{height:"100vh",width:"100%",textAlign:"center",display:"flex",marginTop:"auto",marginBottom:"auto"}},n.a.createElement("h1",null,"Welcome to ",n.a.createElement("b",null,"CoronaSafe.")),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("label",null,"Username:",n.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChange})),n.a.createElement("input",{type:"submit",value:"Submit"}))):this.props.coords&&this.state.loggedIn&&!this.state.map?n.a.createElement("div",{style:{height:"100vh",width:"100%",textAlign:"center",marginTop:"auto",marginBottom:"auto"}},n.a.createElement("h1",null,"Welcome to CoronaSafe, ",this.state.value,"."),n.a.createElement("button",{onClick:this.toggleMap},"Show Map")):this.props.coords&&this.state.loggedIn&&this.state.map?n.a.createElement("div",{style:{height:"100vh",width:"100%",textAlign:"center",marginTop:"auto",marginBottom:"auto"}},n.a.createElement("h1",null,"Welcome to CoronaSafe, ",this.state.value,"."),n.a.createElement("h2",null,"Cases near you below..."),n.a.createElement("button",{onClick:f(this.props.coords,"https://RawPythonTest.r2dev2bb8.repl.co",this.state.value)},"I Got Corona"),n.a.createElement(g.a,{bootstrapURLKeys:{key:"AIzaSyDTz5KwujIjzE6RRCnaJ5ZoZSroy4vdz-0"},defaultCenter:{lat:this.props.coords.latitude,lng:this.props.coords.longitude},defaultZoom:14},this.createTable())):n.a.createElement("div",null,"Getting the location data\u2026 "):n.a.createElement("div",null,"Geolocation is not enabled"):n.a.createElement("div",null,"Your browser does not support Geolocation")}}],[{key:"createPoints",value:function(e,t){for(var a=t,r=0;r<a.length+1;r++)o.state.coords.push(n.a.createElement(v,{lat:a[r].latitude,lng:a[r].longitude}))}}]),o}(a.Component);S.defaultProps={center:{lat:0,lng:0},zoom:11};var y=Object(p.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3})(S);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.bf6a9607.chunk.js.map